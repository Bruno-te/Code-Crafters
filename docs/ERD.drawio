<mxfile host="app.diagrams.net" modified="2025-09-15T00:00:00.000Z" agent="Mozilla/5.0" version="23.1.3" type="device">
  <diagram id="momo-erd" name="ERD">
    <mxGraphModel dx="1036" dy="676" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- USERS entity -->
        <mxCell id="users" value="USERS\n------------------------------\nPK id : INT\nphone : VARCHAR(20) UNIQUE\nfull_name : VARCHAR(120)\nemail : VARCHAR(120)\ncreated_at : DATETIME" style="shape=swimlane;startSize=28;rounded=0;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;recursiveResize=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="60" y="60" width="260" height="170" as="geometry" />
        </mxCell>

        <!-- TRANSACTION_CATEGORIES entity -->
        <mxCell id="categories" value="TRANSACTION_CATEGORIES\n------------------------------\nPK id : INT\nname : VARCHAR(60) UNIQUE\ndescription : VARCHAR(255)\ncreated_at : DATETIME" style="shape=swimlane;startSize=28;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="440" y="60" width="280" height="160" as="geometry" />
        </mxCell>

        <!-- TAGS entity -->
        <mxCell id="tags" value="TAGS\n------------------------------\nPK id : INT\nname : VARCHAR(60) UNIQUE\ndescription : VARCHAR(255)\ncreated_at : DATETIME" style="shape=swimlane;startSize=28;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="760" y="60" width="260" height="160" as="geometry" />
        </mxCell>

        <!-- TRANSACTIONS entity -->
        <mxCell id="transactions" value="TRANSACTIONS\n------------------------------\nPK id : BIGINT\nexternal_ref : VARCHAR(100) UNIQUE\noccurred_at : DATETIME\namount : DECIMAL(12,2)\ncurrency : VARCHAR(8)\nstatus : ENUM\nFK sender_id : INT → USERS.id\nFK receiver_id : INT → USERS.id\nFK category_id : INT → TRANSACTION_CATEGORIES.id\nchannel : VARCHAR(40)\nlocation : VARCHAR(120)\nmessage_excerpt : VARCHAR(255)\ncreated_at : DATETIME" style="shape=swimlane;startSize=28;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="280" y="280" width="420" height="280" as="geometry" />
        </mxCell>

        <!-- TRANSACTION_TAGS junction -->
        <mxCell id="transaction_tags" value="TRANSACTION_TAGS\n------------------------------\nPK transaction_id : BIGINT\nPK tag_id : INT\ncreated_at : DATETIME\nFK transaction_id → TRANSACTIONS.id\nFK tag_id → TAGS.id" style="shape=swimlane;startSize=28;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="760" y="280" width="300" height="170" as="geometry" />
        </mxCell>

        <!-- SYSTEM_LOGS entity -->
        <mxCell id="system_logs" value="SYSTEM_LOGS\n------------------------------\nPK id : BIGINT\nlevel : ENUM\nsource : VARCHAR(60)\nmessage : TEXT\ncreated_at : DATETIME\nFK transaction_id : BIGINT → TRANSACTIONS.id (nullable)" style="shape=swimlane;startSize=28;horizontal=0;childLayout=stackLayout;container=1;collapsible=0;fontStyle=1;align=left;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="60" y="300" width="320" height="190" as="geometry" />
        </mxCell>

        <!-- Relationships -->
        <!-- USERS (sender) 1:M TRANSACTIONS -->
        <mxCell id="edge_sender" value="1:M (sender)" edge="1" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="320" as="sourcePoint" />
            <mxPoint x="280" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge_sender_conn" edge="1" source="users" target="transactions" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- USERS (receiver) 1:M TRANSACTIONS (same entity, conceptual second role) -->
        <mxCell id="edge_receiver_conn" edge="1" source="users" target="transactions" parent="1" style="endArrow=block;endFill=1;dashed=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- TRANSACTION_CATEGORIES 1:M TRANSACTIONS -->
        <mxCell id="edge_category_conn" edge="1" source="categories" target="transactions" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- TRANSACTIONS M:N TAGS via TRANSACTION_TAGS -->
        <mxCell id="edge_txn_to_tt" edge="1" source="transactions" target="transaction_tags" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge_tags_to_tt" edge="1" source="tags" target="transaction_tags" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SYSTEM_LOGS o:1 to TRANSACTIONS -->
        <mxCell id="edge_logs_conn" edge="1" source="system_logs" target="transactions" parent="1" style="endArrow=block;endFill=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="legend" name="Legend">
    <mxGraphModel dx="1036" dy="676" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="legendBox" value="Notation\nPK = Primary Key\nFK = Foreign Key\n1:M, M:N cardinalities shown via connectors\nDashed line indicates role-based second relation (receiver)" style="shape=note;whiteSpace=wrap;align=left;verticalAlign=top;size=14;" vertex="1" parent="1">
          <mxGeometry x="60" y="60" width="360" height="160" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  </mxfile>


